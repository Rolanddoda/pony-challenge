(function(t){function e(e){for(var o,r,i=e[0],u=e[1],c=e[2],h=0,m=[];h<i.length;h++)r=i[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&m.push(a[r][0]),a[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},a={app:0},s=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/pony-challenge/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=(n("d3b7"),n("bc3a")),s=n.n(a),r={baseURL:"https://ponychallenge.trustpilot.com/pony-challenge/"},i=s.a.create(r);i.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),i.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=i,window.axios=i,Object.defineProperties(t.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},o["default"].use(Plugin);Plugin;var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("NewGameDialog",{ref:"newGameDialog",on:{error:function(e){t.error=e},"start-game":t.startGame}}),n("v-snackbar",{attrs:{value:!!t.error},on:{input:function(e){t.error=null}},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.attrs;return[n("v-btn",t._b({attrs:{color:"red",text:""},on:{click:function(e){t.error=null}}},"v-btn",o,!1),[t._v(" Close ")])]}}])},[t._v(" "+t._s(t.error)+" ")]),t.mazeId?n("Maze",{attrs:{id:t.mazeId,cols:t.cols,rows:t.rows},on:{"new-game":t.onNewGame}}):t._e()],1)],1)},c=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:!t.mazeId,persistent:"","max-width":"450"}},[n("v-snackbar",{attrs:{timeout:"-1","multi-line":""},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.attrs;return[n("v-btn",t._b({attrs:{color:"pink",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",o,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarMessage)+" ")]),n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v(" Pony vs Monster game ")]),n("ValidationObserver",{ref:"validationObserver"},[n("v-card-text",[t.userAmount&&t.userAmount>=5?[n("div",{staticClass:"text-subtitle-1 mb-5"},[t._v(" Your amount is "),n("b",[t._v(t._s(t.userAmount))]),t._v(" points to bet. Place your bet: ")]),n("ValidationProvider",{attrs:{name:"Bet amount",rules:"required|integer|min_value:5|max_value:"+t.userAmount},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[n("v-text-field",{attrs:{"error-messages":o,outlined:"",placeholder:"Bet amount",label:"Bet amount"},model:{value:t.betAmount,callback:function(e){t.betAmount=e},expression:"betAmount"}})]}}],null,!1,3073832485)}),n("div",{staticClass:"text-subtitle-1 mb-5"},[t._v(" Who wins ? ")]),n("v-btn",{attrs:{outlined:!t.whoWins||"monster"!==t.whoWins,color:"monster"===t.whoWins?"accent":null},on:{click:function(e){return t.changeWhoWins("monster")}}},[t._v(" Monster ("+t._s(t.monsterBet)+" points) ")]),n("v-btn",{staticClass:"ml-5",attrs:{outlined:!t.whoWins||"pony"!==t.whoWins,color:"pony"===t.whoWins?"accent":null},on:{click:function(e){return t.changeWhoWins("pony")}}},[t._v(" Pony ("+t._s(t.ponyBet)+" points) ")]),t.whoWins?n("div",{staticClass:"text-subtitle-1 mt-5"},[t._v(" If you win, your amount will become "),n("b",[t._v(t._s(t.betToWin+t.userAmount))]),t._v(" "),n("br"),t._v(" If you lose, your amount will become "),n("b",[t._v("0")]),t._v(". "),n("br"),t._v(" How many points can you get without losing ? ")]):t._e(),t.winnerChosenError?n("div",{staticClass:"error--text v-messages ml-3"},[t._v(" "+t._s(t.winnerChosenError)+" ")]):t._e()]:n("div",{staticClass:"text-subtitle-1 mb-5"},[t._v(" Your amount is "+t._s(t.userAmount)+" and that means you can't p"),n("span",{class:{word:t.showHelpCount>1}},[t._v("l")]),t._v("ay anym"),n("span",{class:{word:t.showHelpCount>1}},[t._v("o")]),t._v("re. But if you are a "),n("span",{class:{word:t.showHelpCount>1}},[t._v("c")]),t._v("ool developer and you "),n("span",{class:{word:t.showHelpCount>1}},[t._v("a")]),t._v("re rea"),n("span",{class:{word:t.showHelpCount>1}},[t._v("l")]),t._v("ly "),n("span",{class:{word:t.showHelpCount>1}},[t._v("s")]),t._v("mar"),n("span",{class:{word:t.showHelpCount>1}},[t._v("t")]),t._v(", y"),n("span",{class:{word:t.showHelpCount>1}},[t._v("o")]),t._v("u know that "),n("span",{class:{word:t.showHelpCount>1}},[t._v("r")]),t._v("ules c"),n("span",{class:{word:t.showHelpCount>1}},[t._v("a")]),t._v("n be broken and you can hack this "),n("span",{class:{word:t.showHelpCount>1}},[t._v("g")]),t._v("am"),n("span",{class:{word:t.showHelpCount>1}},[t._v("e")]),t._v(" 😉. "),n("br"),t.showHelpCount>0?[n("b",[t._v("Tip:")]),t._v(" This game doesn't uses a database. ")]:t._e()],2)],2)],1),n("v-card-actions",[n("v-spacer"),t.userAmount&&t.userAmount>=5?n("v-btn",{attrs:{disabled:!t.ponyName,loading:t.isBtnLoading,color:"primary"},on:{click:t.validate}},[t._v(" Start the game ")]):n("v-btn",{attrs:{color:"primary"},on:{click:t.onShowHelp}},[t._v(" "+t._s(t.helpBtnText)+" ")])],1)],1)],1)},h=[],m=(n("a9e3"),n("5530")),d=n("7bb1"),p=n("4c93");function f(t){return/^\d+$/.test(t)}function v(t,e){return Math.floor(Math.random()*(e-t+1))+t}Object(d["c"])("required",Object(m["a"])(Object(m["a"])({},p["e"]),{},{message:"{_field_} is required"})),Object(d["c"])("between",Object(m["a"])(Object(m["a"])({},p["a"]),{},{message:"{_field_} must be between {min} and {max}"})),Object(d["c"])("integer",Object(m["a"])(Object(m["a"])({},p["b"]),{},{message:"{_field_} must be a number"})),Object(d["c"])("min_value",Object(m["a"])(Object(m["a"])({},p["d"]),{},{message:"The minimum amount is {min}"})),Object(d["c"])("max_value",Object(m["a"])(Object(m["a"])({},p["c"]),{},{message:"The maximum amount is {max}"}));var b=o["default"].observable({amount:5,bet:null,whoWins:null,ponyBet:null,monsterBet:null});function w(){return b.amount}function g(t){b.amount=t}function _(){return b.bet}function y(t){b.bet=t}function x(){return b.whoWins}function k(t){b.whoWins=t}function C(){return b.ponyBet}function B(t){b.ponyBet=t}function O(){return b.monsterBet}function W(t){b.monsterBet=t}var P={components:{ValidationProvider:d["b"],ValidationObserver:d["a"]},data:function(){return{isBtnLoading:!1,ponyName:"Fluttershy",mazeId:null,cols:15,rows:15,difficulty:10,betAmount:5,startGameClicked:!1,showHelpCount:0,snackbarMessage:null,snackbar:!1}},computed:{userAmount:w,whoWins:x,ponyBet:C,monsterBet:O,winnerChosenError:function(){return!!this.startGameClicked&&(!this.whoWins&&"You must select who wins")},betToWin:function(){if(this.whoWins){var t=this.whoWins+"Bet";return this.betAmount*this[t]}},helpBtnText:function(){return this.showHelpCount?1===this.showHelpCount?"I want more help":"Hide help":"Give me some help"}},watch:{mazeId:{handler:function(){this.changePonyBet(v(2,4)),this.changeMonsterBet(v(5,8))},immediate:!0}},created:function(){var t=this;window.onstorage=function(){var e=localStorage.getItem("amount");f(e)&&Number(e)<=100&&Number(e)>=5?(t.snackbarMessage="Wow wow wow. You genius. You did it, you hacked the game. 😉",t.snackbar=!0,g(Number(e))):f(e)&&Number(e)<5?(t.snackbarMessage="Not so smart 😎. You can't play with ".concat(e," points 🤣"),t.snackbar=!0,g(Number(e))):f(e)&&Number(e)>100?(t.snackbarMessage="Ha! This game won't allow an amount greater than 100. Can you do it though ?? 🤨",t.snackbar=!0,localStorage.setItem("amount","".concat(t.userAmount))):(t.snackbarMessage="What's up with you ? You can't enter a valid amount ?? pff humans...",t.snackbar=!0,localStorage.setItem("amount","".concat(t.userAmount)))}},methods:{changeWhoWins:k,changePonyBet:B,changeMonsterBet:W,validate:function(){var t=this;this.$refs.validationObserver.validate().then((function(e){e&&(t.startGameClicked=!0,t.winnerChosenError||t.startGame())}))},startGame:function(){var t=this;this.isBtnLoading=!0,this.$axios.post("/maze",{"maze-width":Number(this.cols),"maze-height":Number(this.rows),"maze-player-name":this.ponyName,difficulty:Number(this.difficulty)}).then((function(e){var n=e.data;y(Number(t.betAmount)),t.mazeId=n.maze_id,t.$emit("start-game",{mazeId:t.mazeId,cols:Number(t.cols),rows:Number(t.rows)})})).catch((function(e){t.$emit("error","Error: "+e.response.data)})).finally((function(){return t.isBtnLoading=!1}))},onNewGame:function(){this.mazeId=null,this.changeWhoWins(null),this.snackbar=!1,this.startGameClicked=!1},onShowHelp:function(){2===this.showHelpCount?this.showHelpCount=0:this.showHelpCount++}}},j=P,N=(n("790a"),n("2877")),G=Object(N["a"])(j,l,h,!1,null,"1aa3bcc2",null),z=G.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game fill-height pa-2"},[n("GameOverDialog",{attrs:{"api-bug":t.apiBug,"pony-won":t.won},on:{"new-game":function(e){return t.$emit("new-game")}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}}),t.data?n("div",{staticClass:"maze fill-height",style:{"--cols":t.cols,"--rows":t.rows}},t._l(t.data.data,(function(e,o){return n("div",{key:o,staticClass:"cell",class:[{pony:o===t.pony},{domokun:o===t.data.domokun[0]},{finish:o===t.data["end-point"][0]},{"border-right":0!==o&&(o+1)%t.cols===0},{"border-bottom":o>t.cols*t.rows-t.cols-1},{"border-top":e.includes("north")},{"border-left":e.includes("west")}],attrs:{"data-index":o}},[o===t.pony?n("span",{staticClass:"pony icon",attrs:{"data-flip-key":"pony-icon"}},[t._v("🐎")]):t._e(),o===t.data.domokun[0]?n("span",{staticClass:"domokun icon"},[t._v("👾")]):t._e(),o===t.data["end-point"][0]?n("span",{staticClass:"finish icon"},[t._v("🏁")]):t._e()])})),0):t._e()],1)},I=[],T=(n("99af"),n("4160"),n("159b"),n("2909")),A=(n("96cf"),n("1da1")),S=(n("caad"),n("d81d"),n("2532"),{methods:{canGoTop:function(t){var e=this.data.data;return!e[t].includes("north")},canGoRight:function(t){var e=this.data.data;return(t+1)%this.cols!==0&&!e[t+1].includes("west")},canGoBottom:function(t){var e=this.data.data;return t+this.cols<e.length&&!e[t+this.cols].includes("north")},canGoLeft:function(t){var e=this.data.data;return!e[t].includes("west")},nextTop:function(t){return t-this.cols},nextRight:function(t){return t+1},nextBottom:function(t){return t+this.cols},nextLeft:function(t){return t-1},possibleDirections:function(t,e){var n=this,o=[],a=function(o){var a=e.map((function(t){return t.pos}));return!!a.includes(n.nextPos(t,o))};return this.canGoTop(t)&&!a("top")&&o.push("top"),this.canGoRight(t)&&!a("right")&&o.push("right"),this.canGoBottom(t)&&!a("bottom")&&o.push("bottom"),this.canGoLeft(t)&&!a("left")&&o.push("left"),o},nextPos:function(t,e){return"top"===e&&this.canGoTop(t)?this.nextTop(t):"right"===e&&this.canGoRight(t)?this.nextRight(t):"bottom"===e&&this.canGoBottom(t)?this.nextBottom(t):"left"===e&&this.canGoLeft(t)?this.nextLeft(t):void 0}}}),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"","max-width":"370"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t.userWon?n("h2",[t._v("You won!!!")]):n("h2",[t._v("You lost!!!")])]),n("v-card-text",[t.apiBug?n("h3",[t._v("It's not your fault. Trustpilot api has a bug.")]):t._e(),n("h3",[t._v(" Your new amount is "),n("b",[t._v(t._s(t.amount))])])]),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:function(e){return t.$emit("new-game")}}},[t._v(" New game ? ")])],1)],1)],1)},$=[],E={props:{value:Boolean,ponyWon:Boolean,apiBug:Boolean},computed:{amount:w,bet:_,whoWins:x,ponyBet:C,monsterBet:O,userWon:function(){return!(!this.ponyWon||"pony"!==this.whoWins)||!this.ponyWon&&"monster"===this.whoWins},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(){this.ponyWon&&"pony"===this.whoWins?this.onNewAmount(this.ponyBet*this.bet+this.amount):this.ponyWon||"monster"!==this.whoWins?this.onNewAmount(0):this.onNewAmount(this.monsterBet*this.bet+this.amount)}},methods:{onNewAmount:function(t){g(t),localStorage.setItem("amount","".concat(t))}}},L=E,Y=Object(N["a"])(L,M,$,!1,null,null,null),F=Y.exports,D=n("850f"),R=n.n(D),q={mixins:[S],components:{GameOverDialog:F},props:{id:{type:String,required:!0},cols:{type:Number,required:!0},rows:{type:Number,required:!0}},data:function(){return{data:null,pony:null,ponyPathPos:1,dialog:!1,won:!1,apiBug:!1}},computed:{closestPath:function(){if(!this.data)return[];var t=this.data.pony[0],e=this.data["end-point"][0],n=[{pos:t,step:null}];return this.findPath(t,e,n)}},created:function(){var t=this;this.$axios.get("/maze/".concat(this.id)).then((function(e){var n=e.data;t.data=n,t.pony=n.pony[0],t.play()}))},methods:{ponyToTheNextPosition:function(t,e){var n=this;return Object(A["a"])(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=new R.a({duration:300,easing:"cubic-bezier(0.25, 1, 0.5, 1)"}),a.read(),n.pony=t,o.next=5,n.$nextTick();case 5:a.flip(),t!==n.data["end-point"][0]&&"active"===e.state?setTimeout((function(){return n.play()}),300):("over"===e.state&&t!==n.data["end-point"][0]&&(n.apiBug=!0),n.dialog=!0);case 7:case"end":return o.stop()}}),o)})))()},play:function(){var t=this,e=this.closestPath,n=this.ponyPathPos,o={top:"north",right:"east",bottom:"south",left:"west"},a=e[n].step,s=e[n].pos,r=o[a];this.$axios.post("/maze/".concat(this.id),{direction:r}).then((function(e){var n=e.data;"won"===n.state?t.won=!0:"over"===n.state&&(t.won=!1),t.ponyPathPos++,t.ponyToTheNextPosition(s,n)}))},findPath:function(t,e,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(T["a"])(n);if(t===e)return a;var s=this.possibleDirections(t,a);return s.forEach((function(s){var r=o.nextPos(t,s),i=[].concat(Object(T["a"])(a),[{pos:r,step:s}]);n=o.findPath(r,e,n,i)})),n}}},V=q,J=(n("a26c"),Object(N["a"])(V,H,I,!1,null,"f71ad4d0",null)),U=J.exports,K={name:"App",components:{NewGameDialog:z,Maze:U},data:function(){return{mazeId:null,cols:null,rows:null,error:null}},methods:{onNewGame:function(){this.mazeId=null,this.$refs.newGameDialog.onNewGame()},startGame:function(t){var e=t.mazeId,n=t.rows,o=t.cols;this.mazeId=e,this.rows=n,this.cols=o}}},Q=K,X=(n("5c0b"),Object(N["a"])(Q,u,c,!1,null,null,null)),Z=X.exports,tt=n("2f62");o["default"].use(tt["a"]);var et=new tt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),nt=n("ce5b"),ot=n.n(nt);n("bf40");o["default"].use(ot.a);var at=new ot.a({theme:{themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});n("d5e8"),n("5363");function st(){localStorage.getItem("amount")?g(Number(localStorage.getItem("amount"))):localStorage.setItem("amount","".concat(w()))}st(),o["default"].config.productionTip=!1,new o["default"]({store:et,vuetify:at,render:function(t){return t(Z)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),a=n.n(o);a.a},"790a":function(t,e,n){"use strict";var o=n("b899"),a=n.n(o);a.a},9250:function(t,e,n){},"9c0c":function(t,e,n){},a26c:function(t,e,n){"use strict";var o=n("9250"),a=n.n(o);a.a},b899:function(t,e,n){}});
//# sourceMappingURL=app.ef2ba16a.js.map